[gd_scene load_steps=20 format=3 uid="uid://b8ppw7e2tpk13"]

[ext_resource type="Script" path="res://assets/scripts/characters/spawners/NpcSpawner.cs" id="1_5n4gl"]
[ext_resource type="PackedScene" uid="uid://i4ln01gqm288" path="res://objects/cakes/cake2.tscn" id="1_hplti"]
[ext_resource type="Script" path="res://assets/scripts/characters/PlayersManager.cs" id="1_y7rk8"]
[ext_resource type="PackedScene" uid="uid://bjqal8lmw22dr" path="res://objects/characters/npc.tscn" id="2_ch63m"]
[ext_resource type="Script" path="res://assets/scripts/props/RandomPoint.cs" id="3_1osu1"]
[ext_resource type="Script" path="res://assets/scripts/characters/spawners/PlayerSpawner.cs" id="4_ttbyx"]
[ext_resource type="PackedScene" uid="uid://cmysrdiv5leol" path="res://objects/characters/player.tscn" id="5_fh4su"]
[ext_resource type="Script" path="res://assets/scripts/interface/MainLabel.cs" id="8_78s07"]

[sub_resource type="NavigationMesh" id="NavigationMesh_12a3e"]
vertices = PackedVector3Array(-1.12507, 0.179401, 0.0535998, -0.72507, 0.179401, 0.0535998, -0.52507, 0.179401, -0.7464, -1.32507, 0.179401, -1.3464, -2.52507, 0.179401, -1.3464, -1.32507, 0.179401, -1.3464, 1.27493, 0.179401, -2.3464, 0.47493, 0.179401, -0.7464, 0.67493, 0.179401, 0.0535998, 1.07493, 0.179401, 0.0535998, 1.27493, 0.179401, -2.3464, 1.27493, 0.179401, -2.3464, 2.87493, 0.179401, -2.1464, 5.87493, 0.179401, -4.1464, -1.32507, 0.179401, -1.3464, -0.52507, 0.179401, -0.7464, 0.47493, 0.179401, -0.7464, 1.27493, 0.179401, -2.3464, -5.92507, 0.179401, -4.1464, -5.92507, 0.179401, -0.9464, -2.52507, 0.179401, -1.3464, 1.27493, 0.179401, -2.3464, 5.87493, 0.179401, -4.1464, -5.92507, 0.179401, -0.9464, -2.72507, 0.179401, -0.9464, -2.52507, 0.179401, -1.3464, 2.87493, 0.179401, -2.1464, 2.87493, 0.179401, -0.1464, 5.87493, 0.179401, 0.0535998, 5.87493, 0.179401, -4.1464, -1.92507, 0.179401, 4.0536, -1.92507, 0.179401, 2.0536, -2.72507, 0.179401, 1.8536, -5.92507, 0.179401, 4.0536, -2.72507, 0.179401, 1.8536, -2.72507, 0.179401, -0.9464, -5.92507, 0.179401, -0.9464, -5.92507, 0.179401, 4.0536, 1.07493, 0.179401, 0.0535998, 0.67493, 0.179401, 0.0535998, 0.47493, 0.179401, 0.8536, 1.27493, 0.179401, 1.2536, 5.87493, 0.179401, 0.0535998, 2.87493, 0.179401, -0.1464, 2.67493, 0.179401, 1.2536, 5.87493, 0.179401, 4.0536, -0.52507, 0.179401, 0.8536, -0.72507, 0.179401, 0.0535998, -1.12507, 0.179401, 0.0535998, -1.12507, 0.179401, 1.8536, 2.67493, 0.179401, 1.2536, 1.27493, 0.179401, 1.2536, -1.12507, 0.179401, 1.8536, -1.92507, 0.179401, 4.0536, 5.87493, 0.179401, 4.0536, 1.27493, 0.179401, 1.2536, 0.47493, 0.179401, 0.8536, -0.52507, 0.179401, 0.8536, -1.12507, 0.179401, 1.8536, -1.12507, 0.179401, 1.8536, -1.92507, 0.179401, 2.0536, -1.92507, 0.179401, 4.0536)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(4, 6, 5), PackedInt32Array(8, 7, 9), PackedInt32Array(9, 7, 10), PackedInt32Array(13, 12, 11), PackedInt32Array(15, 14, 16), PackedInt32Array(16, 14, 17), PackedInt32Array(19, 18, 20), PackedInt32Array(20, 18, 21), PackedInt32Array(21, 18, 22), PackedInt32Array(23, 25, 24), PackedInt32Array(27, 26, 28), PackedInt32Array(28, 26, 29), PackedInt32Array(31, 30, 32), PackedInt32Array(32, 30, 33), PackedInt32Array(35, 34, 36), PackedInt32Array(36, 34, 37), PackedInt32Array(39, 38, 40), PackedInt32Array(40, 38, 41), PackedInt32Array(43, 42, 44), PackedInt32Array(44, 42, 45), PackedInt32Array(47, 46, 48), PackedInt32Array(48, 46, 49), PackedInt32Array(51, 50, 52), PackedInt32Array(52, 50, 53), PackedInt32Array(53, 50, 54), PackedInt32Array(56, 55, 57), PackedInt32Array(57, 55, 58), PackedInt32Array(61, 60, 59)]
cell_size = 0.2
cell_height = 0.1
agent_radius = 0.4
agent_max_climb = 0.1

[sub_resource type="PlaneMesh" id="PlaneMesh_7py6j"]

[sub_resource type="BoxShape3D" id="BoxShape3D_jbr5s"]
size = Vector3(12.6488, 0.054202, 9.144)

[sub_resource type="BoxMesh" id="BoxMesh_5ujl3"]

[sub_resource type="BoxShape3D" id="BoxShape3D_ov206"]
size = Vector3(0.669475, 1, 2.47127)

[sub_resource type="BoxMesh" id="BoxMesh_2bv6b"]

[sub_resource type="BoxShape3D" id="BoxShape3D_fwhrj"]
size = Vector3(0.5, 0.5, 0.5)

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_wuu61"]

[sub_resource type="Sky" id="Sky_ry8j7"]
sky_material = SubResource("ProceduralSkyMaterial_wuu61")

[sub_resource type="Environment" id="Environment_82egu"]
background_mode = 2
background_energy_multiplier = 1.2
sky = SubResource("Sky_ry8j7")
ambient_light_source = 3
ambient_light_color = Color(0.32549, 0.345098, 0.372549, 1)

[sub_resource type="LabelSettings" id="LabelSettings_p3vrk"]
font_size = 18

[node name="Scene" type="Node3D"]

[node name="props" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_12a3e")

[node name="plane" type="StaticBody3D" parent="props"]
collision_layer = 4

[node name="mesh" type="MeshInstance3D" parent="props/plane"]
transform = Transform3D(6.32507, 0, 0, 0, 1, 0, 0, 0, 4.5464, 0, 0, 0)
mesh = SubResource("PlaneMesh_7py6j")

[node name="shape" type="CollisionShape3D" parent="props/plane"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0344923, 0)
shape = SubResource("BoxShape3D_jbr5s")

[node name="Wall" type="StaticBody3D" parent="props"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.00381, 0.495025, -0.324025)
collision_layer = 4

[node name="MeshInstance3D" type="MeshInstance3D" parent="props/Wall"]
transform = Transform3D(0.663037, 0, 0, 0, 1, 0, 0, 0, 2.47108, 0, 0, 0)
mesh = SubResource("BoxMesh_5ujl3")

[node name="shape" type="CollisionShape3D" parent="props/Wall"]
shape = SubResource("BoxShape3D_ov206")

[node name="Wall2" type="StaticBody3D" parent="props"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.9595, 0.495025, 0.328166)
collision_layer = 4

[node name="MeshInstance3D" type="MeshInstance3D" parent="props/Wall2"]
transform = Transform3D(0.663037, 0, 0, 0, 1, 0, 0, 0, 2.47108, 0, 0, 0)
mesh = SubResource("BoxMesh_5ujl3")

[node name="shape" type="CollisionShape3D" parent="props/Wall2"]
shape = SubResource("BoxShape3D_ov206")

[node name="box" type="StaticBody3D" parent="props"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0031177, 0.229401, 0.0295777)
collision_layer = 4

[node name="mesh" type="MeshInstance3D" parent="props/box"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
mesh = SubResource("BoxMesh_2bv6b")

[node name="shape" type="CollisionShape3D" parent="props/box"]
shape = SubResource("BoxShape3D_fwhrj")

[node name="cake" parent="props/box" instance=ExtResource("1_hplti")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0714628, 0.248261, 0)

[node name="characters" type="Node3D" parent="."]
script = ExtResource("1_y7rk8")

[node name="charactersSpawner" type="MultiplayerSpawner" parent="."]
_spawnable_scenes = PackedStringArray("res://objects/characters/player.tscn", "res://objects/characters/npc.tscn")
spawn_path = NodePath("../characters")

[node name="npcSpawner" type="Node3D" parent="." node_paths=PackedStringArray("npcParent")]
script = ExtResource("1_5n4gl")
npcParent = NodePath("../characters")
npcPrefab = ExtResource("2_ch63m")
count = 7
spriteCodes = Array[String](["pony1", "pony2", "pony3", "pony4", "pony5", "pony42", "strikely", "wonderbolt1", "chief1"])
metadata/_edit_lock_ = true

[node name="1" type="Node3D" parent="npcSpawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.17903, 0, 2.37824)
script = ExtResource("3_1osu1")
RandomRadius = 2.0

[node name="2" type="Node3D" parent="npcSpawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.747001, 0, 2.08369)
script = ExtResource("3_1osu1")

[node name="3" type="Node3D" parent="npcSpawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.63653, 0, -2.6298)
script = ExtResource("3_1osu1")
RandomRadius = 2.0

[node name="4" type="Node3D" parent="npcSpawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.04628, 0, -2.74488)
script = ExtResource("3_1osu1")
RandomRadius = 2.0

[node name="6" type="Node3D" parent="npcSpawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.319979, 0, -2.82013)
script = ExtResource("3_1osu1")
RandomRadius = 0.5

[node name="7" type="Node3D" parent="npcSpawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.93845, 4.76837e-07, 2.83076)
script = ExtResource("3_1osu1")
RandomRadius = 2.0

[node name="playerThiefSpawner" type="Node3D" parent="." node_paths=PackedStringArray("playersParent")]
script = ExtResource("4_ttbyx")
playersParent = NodePath("../characters")
playerTypeFilter = 1
playerPrefab = ExtResource("5_fh4su")
spriteCodes = Array[String](["pony1", "pony2", "pony3", "pony4", "pony5", "pony42", "strikely", "wonderbolt1"])

[node name="1" type="Node3D" parent="playerThiefSpawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.12987, 0, -3.18642)
script = ExtResource("3_1osu1")
RandomRadius = 3.0

[node name="2" type="Node3D" parent="playerThiefSpawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.46863, 0, -0.646357)
script = ExtResource("3_1osu1")
RandomRadius = 3.0

[node name="3" type="Node3D" parent="playerThiefSpawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.15361, 0, 2.62433)
script = ExtResource("3_1osu1")
RandomRadius = 3.0

[node name="playerGuardSpawner" type="Node3D" parent="." node_paths=PackedStringArray("playersParent")]
script = ExtResource("4_ttbyx")
playersParent = NodePath("../characters")
playerTypeFilter = 2
playerPrefab = ExtResource("5_fh4su")
spriteCodes = Array[String](["guard1", "guard2", "guard3"])

[node name="1" type="Node3D" parent="playerGuardSpawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.02239, 0, -1.98983)
script = ExtResource("3_1osu1")
RandomRadius = 3.0

[node name="2" type="Node3D" parent="playerGuardSpawner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.5486, 0, 1.812)
script = ExtResource("3_1osu1")
RandomRadius = 3.0

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.829788, -0.412792, -0.375572, 0.0101, -0.683972, 0.729439, -0.557987, 0.601487, 0.571721, 0, 0, 0)
shadow_enabled = true
shadow_opacity = 0.8
directional_shadow_mode = 1
directional_shadow_split_1 = 0.05

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_82egu")

[node name="canvas" type="CanvasLayer" parent="."]

[node name="mainLabel" type="Label" parent="canvas"]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -185.0
offset_right = 185.0
offset_bottom = 52.0
grow_horizontal = 2
label_settings = SubResource("LabelSettings_p3vrk")
horizontal_alignment = 1
vertical_alignment = 1
script = ExtResource("8_78s07")
